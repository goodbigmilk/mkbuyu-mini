<view class="customers-page">
  <!-- 顶部统计 -->
  <view class="stats-section">
    <view class="stats-card">
      <view class="stats-item">
        <text class="stats-value">{{customerStats.total_customers || 0}}</text>
        <text class="stats-label">推荐客户</text>
      </view>
      <view class="stats-item">
        <text class="stats-value">¥{{customerStats.total_amount || '0.00'}}</text>
        <text class="stats-label">总消费</text>
      </view>
    </view>
  </view>

  <!-- 客户列表 -->
  <view class="customer-list">
    <view class="list-header">
      <text class="list-title">客户列表</text>
    </view>
    
    <!-- 加载中状态 -->
    <view wx:if="{{loading}}" class="loading-container">
      <van-loading type="spinner" size="24" />
      <text class="loading-text">加载中...</text>
    </view>
    
    <!-- 空状态 -->
    <van-empty wx:elif="{{customerList.length === 0 && !loading}}" description="暂无推荐客户" />
    
    <!-- 客户列表 -->
    <view wx:else class="customer-items">
      <view 
        wx:for="{{customerList}}" 
        wx:key="id" 
        class="customer-item"
      >
        <view class="customer-info">
          <image 
            class="customer-avatar" 
            src="{{item.avatar || '/images/default-avatar.png'}}" 
            mode="aspectFill"
          />
          <view class="customer-details">
            <view class="customer-name">{{item.nickname || '用户' + item.id}}</view>
            <view class="customer-meta">
              <text class="register-time">推荐时间：{{item.referred_at}}</text>
              <text class="customer-phone">{{item.phone}}</text>
            </view>
          </view>
        </view>

        <!-- 客户统计信息 -->
        <view class="customer-stats">
          <view class="stat-item">
            <text class="stat-value">¥{{item.stats.display_total_amount || '0.00'}}</text>
            <text class="stat-label">消费金额</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">¥{{item.stats.display_distribution_amount || '0.00'}}</text>
            <text class="stat-label">分账收益</text>
          </view>
        </view>

      </view>
    </view>

    <!-- 加载更多 -->
    <view class="loading-more" wx:if="{{loading && customerList.length > 0}}">
      <text>加载中...</text>
    </view>

    <!-- 没有更多数据 -->
    <view class="no-more" wx:if="{{!hasMore && customerList.length > 0}}">
      <text>没有更多客户了</text>
    </view>
  </view>
  
  <!-- 底部间距 -->
  <view class="bottom-space"></view>
</view>
